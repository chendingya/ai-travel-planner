# 阿里百炼 API 配置说明

## 什么是阿里百炼？

阿里云百炼（DashScope）是阿里云推出的大模型服务平台，提供通义千问等多种大语言模型。本项目使用阿里百炼替代 OpenAI，以获得更好的中文支持和更稳定的国内访问体验。

## 如何获取 API Key

### 步骤 1：注册阿里云账号
1. 访问 [阿里云官网](https://www.aliyun.com/)
2. 点击右上角"免费注册"
3. 完成账号注册和实名认证

### 步骤 2：开通百炼服务
1. 访问 [阿里云百炼控制台](https://bailian.console.aliyun.com/)
2. 如果是首次使用，需要先开通服务
3. 阿里云百炼提供免费额度，新用户可以免费试用

### 步骤 3：获取 API Key
1. 进入百炼控制台后，点击左侧菜单的 **"API-KEY 管理"**
2. 点击 **"创建新的 API-KEY"**
3. 复制生成的 API Key（格式类似：`sk-xxxxxxxxxxxxxxxxxxxxxxxx`）
4. **重要**: 请妥善保管您的 API Key，不要泄露给他人

### 步骤 4：配置到项目中
1. 打开 `backend/.env` 文件
2. 将 `DASHSCOPE_API_KEY` 的值替换为您获取的 API Key：
   ```bash
   DASHSCOPE_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxx
   ```

## 可用的模型

本项目默认使用 `qwen-plus` 模型，您也可以根据需要修改为其他模型：

- **qwen-plus**: 通义千问增强版，性能优秀，适合复杂任务
- **qwen-turbo**: 通义千问快速版，响应速度快，成本更低
- **qwen-max**: 通义千问旗舰版，最强性能
- **qwen-long**: 长文本版本，支持超长上下文

修改模型的方法：
在 `backend/index.js` 中找到以下代码，修改 `model` 参数：
```javascript
const completion = await openai.chat.completions.create({
  messages: [...],
  model: 'qwen-plus', // 在这里修改模型名称
});
```

## 计费说明

- 阿里云百炼采用按量计费模式
- 新用户通常有免费额度
- 具体价格请参考：[阿里云百炼定价](https://help.aliyun.com/zh/model-studio/product-overview/billing)

## 技术实现

本项目使用 OpenAI SDK 的兼容模式调用阿里百炼 API：
- **baseURL**: `https://dashscope.aliyuncs.com/compatible-mode/v1`
- **SDK**: 继续使用 `openai` npm 包
- **兼容性**: 完全兼容 OpenAI 的调用方式，迁移成本低

## 常见问题

### Q: 为什么选择阿里百炼而不是 OpenAI？
A: 
- ✅ 更好的中文理解和生成能力
- ✅ 国内访问更稳定，无需科学上网
- ✅ 符合国内数据合规要求
- ✅ 新用户有免费额度

### Q: API Key 安全吗？
A: 
- API Key 通过环境变量配置，不会出现在代码中
- `.env` 文件已加入 `.gitignore`，不会被提交到代码仓库
- 请勿将 API Key 分享给他人或公开到互联网

### Q: 如果 API 调用失败怎么办？
A: 
1. 检查 API Key 是否正确
2. 确认阿里云账号余额充足
3. 查看控制台错误日志
4. 检查网络连接是否正常

## 参考链接

- [阿里云百炼官网](https://www.aliyun.com/product/bailian)
- [百炼 API 文档](https://help.aliyun.com/zh/model-studio/developer-reference/api-details)
- [通义千问模型介绍](https://help.aliyun.com/zh/model-studio/getting-started/models)
