# AI Travel Planner - 生图提示词完整说明

本文档详细记录了项目中所有AI图片生成的提示词（Prompt）配置。

---

## 目录

- [一、速记卡片提示词](#一速记卡片提示词)
- [二、旅游明信片提示词](#二旅游明信片提示词)
  - [1. 湖南湘绣风](#1-湖南湘绣风)
  - [2. 张家界水墨风](#2-张家界水墨风)
  - [3. 长沙瓷器彩绘风](#3-长沙瓷器彩绘风)
  - [4. 油画印象风](#4-油画印象风)
  - [5. 古风插画风](#5-古风插画风)
- [三、负面提示词](#三负面提示词)
- [四、技术实现细节](#四技术实现细节)

---

## 一、速记卡片提示词

速记卡片功能用于生成手绘水彩风格的旅行海报，采用垂直分层手账布局。

### 系统提示词 (System Prompt)

```
你是一个专业的旅行海报设计师。请根据用户的旅行计划生成一段适合AI绘图的提示词(Prompt)。

要求：
1. 风格：手绘水彩风格，清新明快
2. 构图：垂直分层手账风格，从上至下按日期分区
3. 色调：以蓝、绿为主，粉黄点缀
4. 元素：包含地标建筑、特色美食、自然风光等
5. 文字标注：每日主题和关键活动
6. 整体氛围：轻松活泼、有留白

请直接返回完整的绘图提示词，无需额外说明。
```

### 用户提示词模板 (User Prompt Template)

```
请为以下旅行计划生成绘图提示词：

目的地：${destination}
天数：${duration}天

每日行程：
${dailySummary}

请生成一段详细的、适合AI绘图使用的提示词。
```

### 生成参数

- **Temperature**: 0.8（较高的创造性）
- **API 端点**: `POST /api/generate-prompt`
- **代码位置**: `backend/src/routes/image.js:51-117`

### 输出示例

假设用户生成的行程为：
- 目的地：长沙
- 天数：3天
- 行程包含岳麓书院、橘子洲、马王堆等

系统会生成类似以下的提示词：
```
手绘水彩风格的旅行海报，垂直分层手账布局。顶部是"长沙3日游"标题。
第一层：岳麓书院 - 古建筑、红墙绿瓦、书香气息
第二层：橘子洲 - 湘江风光、毛主席雕像、江风柳影
第三层：马王堆 - 汉代文物、神秘色彩
蓝绿色调为主，粉黄色点缀。清新明快，轻松活泼，适当留白。
```

---

## 二、旅游明信片提示词

旅游明信片功能提供5种不同艺术风格的选择，每种风格都有独特的视觉特征。

### 基础系统提示词 (Base System Prompt)

```
你是一个专业的旅游明信片设计师，精通湖湘文化与传统艺术。请根据用户的旅行计划和指定的艺术风格生成一段中文的AI绘图提示词。

旅游明信片设计要求：
1. 明信片尺寸比例：4:3的横向构图，适合明信片布局
2. 主要元素：目的地标志性景观、当地文化符号、特色建筑
3. 艺术风格：${styleSuffix || "中国传统艺术风格"}
4. 装饰元素：邮票图案、邮戳、传统花纹、标题文字
5. 色彩风格：符合指定艺术风格的配色，协调统一
6. 整体布局：留有寄语空间，兼具美观和实用性

提示词要求：
- 使用中文描述，不用英文
- 控制在1500字符以内（必须！）
- 详细描述每个设计元素
- 突出地域特色和文化内涵
- 描述清晰具体，便于AI生成

请直接返回简洁的中文的绘图提示词，无需额外说明。
```

### 用户提示词模板 (User Prompt Template)

```
请为以下旅行计划生成【${styleName}】风格的旅游明信片设计提示词：

目的地：${destination}
旅行天数：${duration}天
行程亮点：${dailySummary}

艺术风格特点：${styleSuffix || "中国传统艺术风格"}

请生成一段中文的明信片设计提示词，要体现${destination}的特色景观和${styleName}的艺术风格。
```

### 五种艺术风格详解

---

#### 1. 湖南湘绣风

**风格标识**: `xiangxiu`

**风格后缀 (promptSuffix)**:
```
湖南湘绣艺术风格，精致的刺绣针法纹理，丝线交织的华美图案，传统湘绣配色（红、绿、蓝、紫），绣面质感，中国传统工艺美学
```

**特点描述**: 传统湘绣针法艺术，丝线交织的华美图案

**视觉效果**:
- 精致的刺绣纹理和丝线质感
- 经典的湘绣配色方案（红、绿、蓝、紫）
- 浓厚的中国传统工艺美学
- 适合表现历史文化和传统建筑

---

#### 2. 张家界水墨风

**风格标识**: `zhangjiajie`

**风格后缀 (promptSuffix)**:
```
张家界水墨画风格，云雾缭绕的奇峰异石，中国传统山水画意境，写意泼墨技法，黑白灰层次分明，留白艺术，空灵禅意
```

**特点描述**: 云雾缭绕的奇峰，写意山水画意境

**视觉效果**:
- 写意泼墨的山水画风格
- 云雾缭绕的奇峰异石
- 黑白灰层次分明
- 大量留白，营造空灵禅意
- 适合表现山水风光和自然景观

---

#### 3. 长沙瓷器彩绘风

**风格标识**: `mawangdui`

**风格后缀 (promptSuffix)**:
```
长沙瓷器彩绘风格，长沙窑古陶瓷艺术，青绿釉彩配色，精致的彩绘纹样，传统陶瓷工艺美学，品茶赏花的古雅意境，陶瓷质感纹理
```

**特点描述**: 长沙窑彩绘陶瓷，古雅精致的色彩

**视觉效果**:
- 长沙窑古陶瓷的艺术特色
- 青绿釉彩的古典配色
- 精致的彩绘纹样
- 陶瓷质感和光泽
- 品茶赏花的古雅意境

---

#### 4. 油画印象风

**风格标识**: `dongting`

**风格后缀 (promptSuffix)**:
```
油画印象风格，厚涂油画质感，笔触明显，色彩饱和度高，光影对比强烈，欧洲古典油画美学，适合打印收藏，高级艺术感
```

**特点描述**: 欧洲油画风格，色彩层次丰富

**视觉效果**:
- 厚涂油画的质感
- 明显的笔触痕迹
- 高饱和度的色彩
- 强烈的光影对比
- 欧洲古典油画美学
- 适合打印收藏的高级艺术感

---

#### 5. 古风插画风

**风格标识**: `changsha`

**风格后缀 (promptSuffix)**:
```
古风插画风格，古典美女形象，中国传统服饰，唯美诗意的构图，淡雅水彩笔触，琴棋书画等文化元素，柔和的色调搭配，民国风情与古典美学融合
```

**特点描述**: 古典美女插画，诗意唯美的东方风

**视觉效果**:
- 唯美诗意的东方构图
- 淡雅水彩的笔触风格
- 琴棋书画等传统文化元素
- 柔和协调的色调搭配
- 民国风情与古典美学的融合

### 生成参数

- **Temperature**: 0.75（适中的创造性）
- **API 端点**: `POST /api/generate-postcard-prompt`
- **代码位置**: `backend/src/routes/image.js:207-293`
- **提示词长度限制**: 最多1500字符（超过会自动截断）
- **图片尺寸**: 4:3 比例（1024x768 或 1024:768）

### 前端实现位置

- **Vue 组件**: `frontend/src/views/HandbookView.vue`
- **风格数组**: `artStyles` (第213-244行)
- **提示词生成**: 第322-336行

---

## 三、负面提示词

### 默认负面提示词 (Negative Prompt)

```
黑色、模糊、低质量、变形
```

**用途**: 避免生成低质量或不符合要求的图像元素

**应用场景**:
- 腾讯混元生图 API
- 魔搭社区 ModelScope API

**代码位置**: `backend/src/services/imageGenerator.js:39`

---

## 四、技术实现细节

### 1. 生成流程

#### 速记卡片生成流程

```
用户选择生成速记卡片
    ↓
构建每日行程摘要 (dailySummary)
    ↓
生成系统提示词 + 用户提示词
    ↓
调用 AI 文本生成服务 (temperature: 0.8)
    ↓
获取绘图提示词
    ↓
调用图片生成 API (腾讯混元/魔搭)
    ↓
返回生成的图片
```

#### 旅游明信片生成流程

```
用户选择艺术风格
    ↓
构建行程亮点摘要 (dailySummary)
    ↓
添加风格后缀 (styleSuffix)
    ↓
生成系统提示词 + 用户提示词
    ↓
调用 AI 文本生成服务 (temperature: 0.75)
    ↓
检查提示词长度 (≤1800字符，超过则截断)
    ↓
调用图片生成 API (分辨率: 4:3)
    ↓
返回生成的明信片图片
```

### 2. 提供商支持

项目支持两种图片生成提供商：

| 提供商 | 标识 | 分辨率参数格式 | 默认 |
|--------|------|---------------|------|
| 腾讯混元 | `hunyuan` | `1024:768` | ✓ |
| 魔搭社区 | `modelscope` | `1024x768` | ✗ |

**API 获取提供商列表**: `GET /api/image-providers`

### 3. 错误处理

系统会处理以下常见错误情况：

| 错误代码 | 错误消息 | 处理方式 |
|----------|----------|----------|
| `AuthFailure` | 腾讯云认证失败，请检查密钥配置 | 提示检查配置 |
| `OperationDenied.TextIllegalDetected` | 提示词包含违规内容，请修改后重试 | 提示修改提示词 |
| `FailedOperation.GenerateImageFailed` | 图片生成失败，请重试 | 提示重试 |
| `RequestLimitExceeded` | 请求次数超过限制，请稍后再试 | 提示稍后再试 |
| `ResourceUnavailable.InArrears` | 账号已欠费，请充值后继续使用 | 提示充值 |

### 4. 代码文件索引

| 文件 | 路径 | 说明 |
|------|------|------|
| 速记卡片提示词生成 | `backend/src/routes/image.js:51-117` | `/api/generate-prompt` |
| 明信片提示词生成 | `backend/src/routes/image.js:207-293` | `/api/generate-postcard-prompt` |
| 图片生成服务 | `backend/src/services/imageGenerator.js` | 腾讯混元/魔搭集成 |
| 负面提示词配置 | `backend/src/services/imageGenerator.js:39` | 默认负面提示词 |
| 速记卡片前端 | `frontend/src/views/QuickNoteView.vue` | 用户界面 |
| 明信片前端 | `frontend/src/views/HandbookView.vue` | 用户界面+风格定义 |
| 文本生成服务 | `backend/src/services/textGenerator.js` | AI文本生成基础类 |

### 5. 前端风格配置

风格配置在前端硬编码，位于 `frontend/src/views/HandbookView.vue:213-244`：

```javascript
const artStyles = ref([
  {
    id: 'xiangxiu',
    name: '湖南湘绣风',
    description: '传统湘绣针法艺术，丝线交织的华美图案',
    promptSuffix: '湖南湘绣艺术风格，精致的刺绣针法纹理，丝线交织的华美图案，传统湘绣配色（红、绿、蓝、紫），绣面质感，中国传统工艺美学'
  },
  // ... 其他风格
]);
```

### 6. 温度参数说明

- **0.75** (明信片): 适中的创造性，平衡稳定性和多样性
- **0.8** (速记卡片): 较高的创造性，更适合艺术表达

温度越高，生成的提示词越有创意，但也可能不够稳定。

---

## 使用建议

### 1. 选择合适的风格

- **历史文化类景点**: 推荐湖南湘绣风或古风插画风
- **山水风光类**: 推荐张家界水墨风
- **博物馆/文物类**: 推荐长沙瓷器彩绘风
- **现代都市类**: 推荐油画印象风

### 2. 优化提示词

如需调整提示词效果，可以修改：
- 系统提示词的风格描述
- 风格后缀的详细程度
- 温度参数

### 3. 质量控制

- 检查生成的提示词长度是否合理
- 监控API调用频率，避免超限
- 及时充值以避免欠费

---

## 版本历史

- **v1.0** (2026-01-18): 初始版本，整理所有生图提示词

---

## 相关文档

- [AI速记卡片功能说明.md](./AI速记卡片功能说明.md)
- [数字人及AI面对面对话功能说明.md](./数字人及AI面对面对话功能说明.md)

---

*本文档由系统自动生成*
*最后更新时间: 2026年1月18日*
