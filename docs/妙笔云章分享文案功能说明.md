# 妙笔·云章 - AI分享文案功能说明

## 功能概述

"妙笔·云章"功能基于您的旅行计划，使用AI生成适合各社交平台的分享文案。该功能集成了以下技术：

- **阿里百炼/GitCode AI**：用于生成高质量的分享文案
- **平台适配**：针对不同社交平台的特点和风格优化
- **情绪表达**：支持多种文案风格选择

## 功能流程

1. 用户在旅行计划详情页点击"妙笔·云章"按钮
2. 系统跳转到分享文案生成页面
3. **用户选择分享平台**（小红书、朋友圈、抖音）
4. **选择文案风格**（种草、治愈、攻略、emo、吐槽）
5. **重点地点设置**（可选）：系统自动填入旅行地点，用户可修改
6. AI生成符合平台特点和风格偏好的分享文案
7. 显示生成的文案，用户可以下载、复制或重新生成


## 使用说明

### 用户操作流程

1. **生成旅行计划**：在"智能规划"页面生成旅行计划
2. **查看计划详情**：进入计划详情页
3. **生成分享文案**：点击右侧顶部"快捷操作"卡片中的"妙笔·云章"按钮
4. **选择平台**：
   - 小红书：适合图文分享，注重种草和体验分享
   - 朋友圈：适合熟人社交，注重生活分享
   - 抖音：适合短视频分享，注重视觉冲击
5. **选择文案风格**：
   - 种草：推荐和安利风格，激发他人兴趣
   - 治愈：温暖治愈风格，分享美好感受
   - 攻略：实用指南风格，提供旅行建议
   - emo：情感表达风格，分享内心感受
   - 吐槽：幽默调侃风格，分享旅行趣事
6. **确认地点**：系统自动填充旅行地点，可进行修改
7. **生成文案**：点击"生成文案"按钮
8. **查看结果**：生成完成后可以：
   - 查看完整的分享文案
   - 复制文案到剪贴板
   - 下载文案为文本文件
   - 重新生成（如果对结果不满意）

### UI 界面设计

- **渐变色标题卡片**：绿色系渐变背景，体现文案创作主题
- **平台选择区域**：三个平台卡片，图标+名称的卡片式设计
- **风格选择区域**：五种风格卡片，图标+名称的卡片式设计
- **重点地点输入**：自动填充，支持手动编辑
- **文案展示区域**：
  - 平台标签和风格标签
  - 完整文案内容
  - 生成时间和目的地信息
  - 保存、复制、重新生成按钮

## 文案生成逻辑

系统会根据以下信息智能生成文案：

- 目的地名称和特色
- 旅行天数和主题
- 主要景点和活动
- 选择的社交平台特点
- 选择的文案风格

生成逻辑：
1. **平台适配**：
   - 小红书：emoji丰富，段落清晰，话题标签明确
   - 朋友圈：亲切自然，生活化表达，避免过于广告化
   - 抖音：简洁有力，突出视觉元素，引导互动
2. **风格处理**：
   - 种草：使用推荐性语言，强调体验亮点
   - 治愈：使用温暖词汇，营造舒适氛围
   - 攻略：使用实用词汇，提供具体建议
   - emo：使用情感词汇，表达内心感受
   - 吐槽：使用幽默语言，分享旅行趣事
3. **内容结构**：
   - 开头：吸引眼球的引言
   - 正文：亮点描述和个人感受
   - 结尾：总结或互动引导
   - 话题标签：相关热门标签

### 平台特点说明

- **小红书**：
  - 目标受众：年轻用户，女性为主
  - 内容特点：图文并茂，体验导向
  - 文案风格：emoji丰富，分段清晰，话题标签明确
  - 字数限制：建议1000字以内
  - 适合：旅行体验、美食推荐、打卡分享

- **朋友圈**：
  - 目标受众：熟人社交圈
  - 内容特点：生活分享，真实感受
  - 文案风格：自然亲切，避免过度营销
  - 字数限制：建议简洁，不超过朋友圈显示范围
  - 适合：生活记录，感受分享

- **抖音**：
  - 目标受众：广泛用户群体
  - 内容特点：视频为主，文案为辅
  - 文案风格：简洁有力，引导互动
  - 字数限制：建议简短，突出重点
  - 适合：短视频描述，亮点提炼

## 错误处理

### 常见错误及解决方案

1. **"请先生成旅行计划"**
   - 系统检测到没有有效的旅行计划
   - 返回规划页面生成新的旅行计划

2. **"生成失败：网络错误"**
   - 检查网络连接是否正常
   - 确认AI API Key是否正确配置
   - 查看后端日志了解详细错误

3. **"生成失败：API密钥无效"**
   - 检查AI_API_KEY是否正确
   - 确认API密钥未过期
   - 重新配置有效的API密钥

4. **"生成失败：内容违规"**
   - AI生成的文案可能包含敏感词汇
   - 点击"重新生成"按钮重试
   - 如持续出现，可能需要调整内容生成逻辑

5. **"复制失败"**
   - 检查浏览器是否支持剪贴板API
   - 确认已授权剪贴板访问权限
   - 尝试手动选择并复制文案

## 技术架构

### 前端部分

- **ShareContentView.vue**：分享文案生成页面
  - 平台和风格选择界面
  - 文案展示和编辑功能
  - 复制和下载功能
  - 重新生成功能

### 后端部分

- **POST /api/generate-share-content**：生成分享文案
  - 输入：
    - `destination`: 目的地
    - `duration`: 旅行天数
    - `dailyItinerary`: 每日行程
    - `platform`: 分享平台（xiaohongshu/moments/douyin）
    - `emotion`: 文案风格
    - `highlights`: 重点地点数组
  - 输出：包含文案内容和元数据的对象

## 未来优化方向

1. **更多平台支持**：增加微博、B站、Instagram等平台
2. **图文结合**：支持配图建议和图片生成
3. **热门话题**：自动推荐相关热门话题标签
4. **个性化学习**：基于用户历史选择优化推荐
5. **模板功能**：提供常用文案模板，快速生成
6. **定时分享**：支持设置定时发布到社交平台

## 注意事项

1. 生成的文案仅供参考，发布前请根据实际情况调整
2. 不同平台有不同规则和社区氛围，请适当调整发布内容
3. 话题标签使用需谨慎，避免使用无关或敏感标签
4. 如遇到生成失败，尝试更换不同风格或平台组合

## 问题反馈

如在使用过程中遇到问题，请检查：

1. 环境变量是否正确配置
2. 服务器日志中的错误信息
3. 旅行计划是否已生成
4. 浏览器是否支持剪贴板功能
5. 网络连接是否正常

---

更新时间：2025年11月29日